var R=Object.defineProperty;var A=s=>{throw TypeError(s)};var x=(s,e,t)=>e in s?R(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var E=(s,e,t)=>x(s,typeof e!="symbol"?e+"":e,t),T=(s,e,t)=>e.has(s)||A("Cannot "+t);var r=(s,e,t)=>(T(s,e,"read from private field"),t?t.call(s):e.get(s)),d=(s,e,t)=>e.has(s)?A("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),N=(s,e,t,a)=>(T(s,e,"write to private field"),a?a.call(s,t):e.set(s,t),t);import{Q as w,X as B,a1 as g,Y as I,y as F,N as M,B as y,J as O,ai as C,O as H,z as U,E as Y,aj as j,F as z,H as G,G as J,A as L,I as S,ae as D,m as P,g as Q,ak as X,al as $,d as q}from"./CpKiMDMZ.js";import{s as K,g as V}from"./DT2_Hpur.js";var h,l,o,b,p,m;class W{constructor(e,t=!0){E(this,"anchor");d(this,h,new Map);d(this,l,new Map);d(this,o,new Map);d(this,b,!0);d(this,p,()=>{var e=w;if(r(this,h).has(e)){var t=r(this,h).get(e),a=r(this,l).get(t);if(a)B(a);else{var f=r(this,o).get(t);f&&(r(this,l).set(t,f.effect),r(this,o).delete(t),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),a=f.effect)}for(const[n,i]of r(this,h)){if(r(this,h).delete(n),n===e)break;const c=r(this,o).get(i);c&&(g(c.effect),r(this,o).delete(i))}for(const[n,i]of r(this,l)){if(n===t)continue;const c=()=>{if(Array.from(r(this,h).values()).includes(n)){var _=document.createDocumentFragment();C(i,_),_.append(F()),r(this,o).set(n,{effect:i,fragment:_})}else g(i);r(this,l).delete(n)};r(this,b)||!a?I(i,c,!1):c()}}});d(this,m,e=>{r(this,h).delete(e);const t=Array.from(r(this,h).values());for(const[a,f]of r(this,o))t.includes(a)||(g(f.effect),r(this,o).delete(a))});this.anchor=e,N(this,b,t)}ensure(e,t){var a=w,f=H();if(t&&!r(this,l).has(e)&&!r(this,o).has(e))if(f){var n=document.createDocumentFragment(),i=F();n.append(i),r(this,o).set(e,{effect:M(()=>t(i)),fragment:n})}else r(this,l).set(e,M(()=>t(this.anchor)));if(r(this,h).set(a,e),f){for(const[c,u]of r(this,l))c===e?a.skipped_effects.delete(u):a.skipped_effects.add(u);for(const[c,u]of r(this,o))c===e?a.skipped_effects.delete(u.effect):a.skipped_effects.add(u.effect);a.oncommit(r(this,p)),a.ondiscard(r(this,m))}else y&&(this.anchor=O),r(this,p).call(this)}}h=new WeakMap,l=new WeakMap,o=new WeakMap,b=new WeakMap,p=new WeakMap,m=new WeakMap;function te(s,e,t=!1){y&&Y();var a=new W(s),f=t?j:0;function n(i,c){if(y){const _=z(s)===G;if(i===_){var u=J();L(u),a.anchor=u,S(!1),a.ensure(i,c),S(!0);return}}a.ensure(i,c)}U(()=>{var i=!1;e((c,u=!0)=>{i=!0,n(u,c)}),i||n(!1,null)},f)}let v=!1,k=Symbol();function ae(s,e,t){const a=t[e]??(t[e]={store:null,source:P(void 0),unsubscribe:D});if(a.store!==s&&!(k in t))if(a.unsubscribe(),a.store=s??null,s==null)a.source.v=void 0,a.unsubscribe=D;else{var f=!0;a.unsubscribe=K(s,n=>{f?a.source.v=n:q(a.source,n)}),f=!1}return s&&k in t?V(s):Q(a.source)}function re(){const s={};function e(){X(()=>{for(var t in s)s[t].unsubscribe();$(s,k,{enumerable:!1,value:!0})})}return[s,e]}function ie(s,e,t){return s.set(t),e}function ne(s){var e=v;try{return v=!1,[s(),v]}finally{v=e}}export{W as B,re as a,ie as b,ne as c,te as i,ae as s};
